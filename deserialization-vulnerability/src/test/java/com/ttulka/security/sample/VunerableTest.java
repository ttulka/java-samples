package com.ttulka.security.sample;

import java.nio.file.Path;

import org.junit.jupiter.api.Test;
import org.junit.jupiter.api.io.TempDir;

import static com.ttulka.security.SerializationUtils.deserialize;
import static com.ttulka.security.SerializationUtils.serialize;
import static org.assertj.core.api.Assertions.assertThat;

class VunerableTest {

    @Test
    void object_is_serialized(@TempDir Path tempDir) throws Exception {
        Vunerable vunerable = new Vunerable();
        vunerable.setProperty("Test123");

        Path serFile = tempDir.resolve("test.ser");

        serialize(vunerable, serFile);

        Vunerable deserialized = deserialize(serFile);

        assertThat(deserialized.toString()).isEqualTo("Test123");
    }
}
