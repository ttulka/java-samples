package com.ttulka.security;

import java.io.InputStream;
import java.io.ObjectInputStream;
import java.io.ObjectOutputStream;
import java.io.OutputStream;
import java.nio.file.Files;
import java.nio.file.Path;

public class SerializationUtils {

    public static void serialize(Object object, Path file) throws Exception {
        try (OutputStream fos = Files.newOutputStream(file);
             ObjectOutputStream oos = new ObjectOutputStream(fos)) {

            oos.writeObject(object);
            oos.flush();
        }
    }

    public static <T> T deserialize(Path file) throws Exception {
        try (InputStream fis = Files.newInputStream(file);
             ObjectInputStream ois = new ObjectInputStream(fis)) {

            return (T) ois.readObject();
        }
    }
}
